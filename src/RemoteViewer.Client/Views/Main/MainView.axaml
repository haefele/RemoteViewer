<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:RemoteViewer.Client.Views.Main"
        xmlns:conv="using:RemoteViewer.Client.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="300"
        x:Class="RemoteViewer.Client.Views.Main.MainView"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="RemoteViewer"
        CanResize="False"
        Width="500" Height="300">

    <Design.DataContext>
        <vm:MainViewModel/>
    </Design.DataContext>

    <DockPanel>
        <!-- Status Bar at Bottom -->
        <Border DockPanel.Dock="Bottom"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                Padding="10,6">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <Ellipse Width="12" Height="12">
                    <Ellipse.Fill>
                        <SolidColorBrush Color="{Binding IsConnected, Converter={x:Static conv:BoolToColorConverter.Instance}}"/>
                    </Ellipse.Fill>
                </Ellipse>
                <TextBlock Text="{Binding StatusText}"
                           VerticalAlignment="Center"
                           FontSize="12"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid ColumnDefinitions="*,*" Margin="16">
            <!-- Left Panel - Your Credentials -->
            <Border Grid.Column="0"
                    Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                    CornerRadius="8"
                    Padding="16"
                    Margin="0,0,8,0">
                <StackPanel Spacing="12">
                    <TextBlock Text="Your Credentials"
                               FontWeight="SemiBold"
                               FontSize="16"/>

                    <StackPanel Spacing="4">
                        <TextBlock Text="ID"
                                   FontSize="12"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <SelectableTextBlock Text="{Binding YourUsername}"
                                             Margin="0, 8, 0, 2"
                                             FontFamily="Consolas, Courier New, monospace"
                                             FontSize="18"
                                             FontWeight="Bold"/>
                    </StackPanel>

                    <StackPanel Spacing="4">
                        <TextBlock Text="Password"
                                   FontSize="12"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <SelectableTextBlock Text="{Binding YourPassword}"
                                             Margin="0, 8, 0, 2"
                                             FontFamily="Consolas, Courier New, monospace"
                                             FontSize="18"
                                             FontWeight="Bold"/>
                    </StackPanel>

                    <TextBlock Text="Share these with someone to let them connect to you"
                               TextWrapping="Wrap"
                               FontSize="11"
                               Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                               Margin="0,8,0,0"/>
                </StackPanel>
            </Border>

            <!-- Right Panel - Connect to Device -->
            <Border Grid.Column="1"
                    Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                    CornerRadius="8"
                    Padding="16"
                    Margin="8,0,0,0">
                <StackPanel Spacing="12">
                    <TextBlock Text="Connect to Device"
                               FontWeight="SemiBold"
                               FontSize="16"/>

                    <StackPanel Spacing="4">
                        <TextBlock Text="ID"
                                   FontSize="12"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <TextBox Text="{Binding TargetUsername}"
                                 Watermark="Enter ID"
                                 IsEnabled="{Binding !IsConnecting}"/>
                    </StackPanel>

                    <StackPanel Spacing="4">
                        <TextBlock Text="Password"
                                   FontSize="12"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        <TextBox Text="{Binding TargetPassword}"
                                 Watermark="Enter password"
                                 PasswordChar="*"
                                 IsEnabled="{Binding !IsConnecting}"/>
                    </StackPanel>

                    <Button Content="{Binding IsConnecting, Converter={x:Static conv:BoolToConnectTextConverter.Instance}}"
                            Command="{Binding ConnectToDeviceCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center"
                            Classes="accent"
                            IsEnabled="{Binding !IsConnecting}"
                            Margin="0,4,0,0"/>

                    <TextBlock Text="{Binding ConnectionError}"
                               Foreground="Red"
                               FontSize="12"
                               TextWrapping="Wrap"
                               IsVisible="{Binding ConnectionError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>

</Window>
