<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mi="using:Material.Icons.Avalonia"
        xmlns:controls="using:RemoteViewer.Client.Controls"
        xmlns:dialogs="using:RemoteViewer.Client.Controls.Dialogs"
        x:Class="RemoteViewer.Client.Controls.Dialogs.FileTransferConfirmationDialog"
        x:DataType="dialogs:FileTransferConfirmationDialogViewModel"
        Title="Incoming File"
        Icon="/Assets/avalonia-logo.ico"
        SizeToContent="WidthAndHeight"
        CanResize="False"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterScreen">

    <Border Classes="p-xl" MinWidth="320" MaxWidth="400">

        <StackPanel Classes="gap-lg">

            <!-- Header -->
            <controls:DialogHeader Icon="FileDownload"
                                   IconForeground="{DynamicResource ToastInfoAccentBrush}"
                                   IconBackground="{DynamicResource BadgeBackgroundBrush}"
                                   Title="Incoming File"
                                   Subtitle="{Binding SenderDisplayName, StringFormat='From {0}'}"/>

            <!-- File info card -->
            <Border Classes="card">
                <Grid ColumnDefinitions="Auto,*">
                    <mi:MaterialIcon Grid.Column="0"
                                     Kind="File"
                                     Width="{StaticResource IconSizeMD}"
                                     Height="{StaticResource IconSizeMD}"
                                     Classes="mr-md justify-center text-secondary"/>
                    <StackPanel Grid.Column="1" Classes="gap-xxs">
                        <TextBlock Text="{Binding FileName}"
                                   Classes="header-small"
                                   TextTrimming="CharacterEllipsis"
                                   ToolTip.Tip="{Binding FileName}"/>
                        <TextBlock Text="{Binding FileSizeFormatted}"
                                   Classes="small"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Action buttons -->
            <Grid ColumnDefinitions="*,10,*">
                <Button Grid.Column="0"
                        Classes="action-secondary w-full"
                        Click="OnRejectClicked">
                    <StackPanel Classes="flex-row gap-icon">
                        <mi:MaterialIcon Kind="Close" Width="{StaticResource IconSizeSM}" Height="{StaticResource IconSizeSM}"/>
                        <TextBlock Text="Reject" Classes="justify-center"/>
                    </StackPanel>
                </Button>

                <Button Grid.Column="2"
                        Classes="action-primary w-full"
                        Click="OnAcceptClicked">
                    <StackPanel Classes="flex-row gap-icon">
                        <mi:MaterialIcon Kind="Check" Width="{StaticResource IconSizeSM}" Height="{StaticResource IconSizeSM}"/>
                        <TextBlock Text="Accept" Classes="justify-center"/>
                    </StackPanel>
                </Button>
            </Grid>

        </StackPanel>
    </Border>
</Window>
