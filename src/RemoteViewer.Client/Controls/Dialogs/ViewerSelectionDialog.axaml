<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mi="using:Material.Icons.Avalonia"
        xmlns:dialogs="using:RemoteViewer.Client.Controls.Dialogs"
        xmlns:presenter="using:RemoteViewer.Client.Views.Presenter"
        x:Class="RemoteViewer.Client.Controls.Dialogs.ViewerSelectionDialog"
        x:DataType="dialogs:ViewerSelectionDialogViewModel"
        Title="Send File"
        Icon="/Assets/avalonia-logo.ico"
        SizeToContent="WidthAndHeight"
        CanResize="False"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterOwner">

    <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
            CornerRadius="4"
            Margin="16"
            Padding="16"
            MinWidth="320"
            MaxWidth="450">

        <StackPanel Spacing="16">
            <!-- Header with icon and title -->
            <StackPanel Orientation="Horizontal" Spacing="8">
                <mi:MaterialIcon Kind="FileUpload"
                                 Width="28"
                                 Height="28"/>
                <TextBlock Text="Send File"
                           FontSize="18"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- File info card -->
            <StackPanel Spacing="8">
                <TextBlock Text="Select viewers to receive:"
                           FontSize="14"
                           TextWrapping="Wrap"/>

                <Border Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                        CornerRadius="4"
                        Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="{Binding FileName}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   TextWrapping="Wrap"/>
                        <TextBlock Text="{Binding FileSizeFormatted}"
                                   FontSize="12"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Viewer checkboxes -->
            <ItemsControl ItemsSource="{Binding Viewers}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="presenter:PresenterViewerDisplay">
                        <CheckBox Content="{Binding DisplayName}"
                                  IsChecked="{Binding IsSelected}"
                                  Padding="4,6"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,16,*">
                <Button Grid.Column="0"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Padding="16,10"
                        Click="OnCancelClicked">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <mi:MaterialIcon Kind="Close" Width="16" Height="16"/>
                        <TextBlock Text="Cancel" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <Button Grid.Column="2"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="accent"
                        Padding="16,10"
                        Click="OnSendClicked">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <mi:MaterialIcon Kind="Send" Width="16" Height="16"/>
                        <TextBlock Text="Send" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
            </Grid>
        </StackPanel>
    </Border>
</Window>
